{% import 'ArmdNewsBundle::date_macro.html.twig' as news_date%}
{% import _self as self %}

{% macro article(article) %}
    <span class="date">{{ article.newsDate|date('H:i') }} / <a href="#">{{ article.category.title }}</a></span>
    <a href="#">{{ article.title}}</a>
{% endmacro %}

{% for date, news in newsByDate %}
    <section class="block">
        <h1 class="long-border"><span>{{ news_date.news_date_short(news[0].newsDate) }}</span></h1>

        <div class="theme-news-block search-news-block clearfix">
            <ul class="theme-news-list">
                {% set lasti = 0 %}
                {% for i in 0..(news|length-1)//2+1 %}
                    <li>{{ self.article(news[i]) }}</li>
                    {% set lasti = i %}
                {% endfor %}
            </ul>

            <ul class="theme-news-list search-news-list">
                {% for i in lasti+1..(news|length-1) %}
                    <li>{{ self.article(news[i]) }}</li>
                {% endfor %}
            </ul>

        </div>
    </section>
{% endfor %}

<script type="text/javascript">
    var firstLoadedDate = '{{ newsByDate|keys[newsByDate|keys|length - 1] }}';
    var lastLoadedDate = '{{ newsByDate|keys[0] }}';
</script>


