{% extends '::base.html.twig' %}

{# ------------------------------------------------------------------------ #}
{% block body %}
    <div class="blocksection w" id="f-section">
        <div class="filter checks-filter" style="width:23.7%">
            <div class="title dark-green-title title-filter">
                <h2>Фильтрация</h2>
            </div>
            <form action="" class="atlas-filter-form">
                <div class="simple-search">
                    <label for="ss_input">Поиск адреса</label>
                    <input type="text" class="ss-input" id="ss_input" />
                </div>

                <div class="filter-tabs">
                    <ul class="filter-tabs-titles">
                        <li class="active"><a href="#obj">Объекты</a></li>
                        <li class=""><a href="#mrsh">Маршруты</a></li>
                        <li class=""><a href="#maps">Мои карты</a></li>
                    </ul>
                    <div class="filter-tab" id="obj" style="display:block;">
                        <!-- объекты -->
                        <div class="simple-filter-block">
                            <div class="simple-filter-options">
                                <label class="red-checked">
                                    <input type="checkbox" name="video" id="video"  />
                                    <span data-tag="11">ОБРАЗЫ РОССИИ</span>
                                </label><label class="red-checked">
                                    <input type="checkbox" name="presentations" id="presentations" />
                                    <span data-tag="11">ЮНЕСКО</span>
                                </label>
                            </div>
                        </div>
                        <div class="simple-filter-block">
                            <div class="simple-filter-header clearfix">
                                <span>Достопримечательности</span>
                                <p class="check_all"><span>все</span></p>
                            </div>
                            <div class="simple-filter-options">
                                <label class="darkred-checked">
                                    <input type="checkbox" name="video" id="video"  />
                                    <span data-tag="1">Кремли</span>
                                </label><label class="darkgreen-checked">
                                    <input type="checkbox" name="presentations" id="presentations" />
                                    <span data-tag="2">Памятники</span>
                                </label><label class="darkred-checked">
                                    <input type="checkbox" name="texts" id="texts" />
                                    <span data-tag="3">Площади</span>
                                </label><label class="darkred-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="4">Сооружения</span>
                                </label><label class="blue-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="5">Храмы</span>
                                </label><label class="gray-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="6">другие</span>
                                </label>
                            </div>
                        </div>
                        <div class="simple-filter-block">
                            <div class="simple-filter-header clearfix">
                                <span>Учреждения</span>
                                <p class="check_all"><span>все</span></p>
                            </div>
                            <div class="simple-filter-options">
                                <label class="orange-checked">
                                    <input type="checkbox" name="" id=""  />
                                    <span data-tag="7">Архивы</span>
                                </label><label class="lightblue-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="8">Библиотеки</span>
                                </label><label class="orange-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="9">Выставки</span>
                                </label><label class="green-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="10">Заповедники</span>
                                </label><label class="orange-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="11">Музеи</span>
                                </label><label class="violet-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="12">Образовательные</span>
                                </label><label class="brown-checked">
                                    <input type="checkbox" name="" id=""  />
                                    <span data-tag="13">Общества</span>
                                </label><label class="darkerblue-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="14">Официальные</span>
                                </label><label class="purple-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="15">Театр</span>
                                </label><label class="orange-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="16">Фонды</span>
                                </label><label class="pink-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="17">Цирк</span>
                                </label><label class="gray-checked">
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="18">другие</span>
                                </label>
                            </div>
                        </div>
                        <div class="simple-filter-block">
                            <div class="simple-filter-header clearfix">
                                <span>Тематика</span>
                                <p class="check_all"><span>все</span></p>
                            </div>
                            <div class="simple-filter-options all-gray-checked">
                                <label >
                                    <input type="checkbox" name="" id=""  />
                                    <span data-tag="19">Археология</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="20">Архитектура</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="21">Балет</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="22">Декор и дизайн</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="23">Драма</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="24">Живопись</span>
                                </label>
                                <label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="25">Зрелища</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="26">Краеведение</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="27">Киноискусство</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="28">Культура</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="29">Литература</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="30">Музыка</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="31">Народное творчество</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="32">Наука</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="33">Опера</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="34">Природа</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="35">Скульптура</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="36">Этнография</span>
                                </label>
                            </div>
                        </div>
                        <div class="simple-filter-block">
                            <div class="simple-filter-header clearfix">
                                <span>Религия</span>
                                <p class="check_all"><span>все</span></p>
                            </div>
                            <div class="simple-filter-options all-blue-checked">
                                <label >
                                    <input type="checkbox" name="" id=""  />
                                    <span data-tag="37">Православие</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="38">Буддизм</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="39">Мусульманство</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="40">Иудаизм</span>
                                </label>
                            </div>
                        </div>
                        <div class="simple-filter-block">
                            <div class="simple-filter-header clearfix">
                                <span>Дополнительно</span>
                                <p class="check_all"><span>все</span></p>
                            </div>
                            <div class="simple-filter-options all-gray-checked">
                                <label >
                                    <input type="checkbox" name="" id=""  />
                                    <span data-tag="41">Вещи</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="42">Война</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="43">Дети</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="44">Досуг</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="45">История</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="46">Персоны</span>
                                </label><label >
                                    <input type="checkbox" name="" id="" />
                                    <span data-tag="47">Современность</span>
                                </label>
                            </div>
                        </div>
                        <!-- -->
                    </div>
                    <div class="filter-tab" id="mrsh">
                        <!-- маршруты -->
                    </div>
                    <div class="filter-tab" id="maps">
                        <!-- мои карты -->
                        <div class="filter-sub-tabs">
                            <ul class="filter-sub-tabs-titles">
                                <li class="active"><a href="#myobj">Мои объекты</a></li>
                                <li><a href="#mymrsh">Мои маршруты</a></li>
                            </ul>
                            <div class="filter-sub-tab" id="myobj" style="display:block;">
                                <ol class="filter-sub-tab-list" id="myobj_list">
                                    <li>
                                        <span>Новый объект</span>
                                        <a href="#" class="del" title="Удалить"></a>
                                        <span class="moder"></span>
                                    </li>
                                    <li>
                                        <span>Пушкинский музей</span>
                                        <a href="#" class="del" title="Удалить"></a>
                                    </li>
                                    <li>
                                        <span>Донской монастырь</span>
                                        <a href="#" class="del" title="Удалить"></a>
                                    </li>
                                    <li>
                                        <span>Московский Кремль</span>
                                        <a href="#" class="del" title="Удалить"></a>
                                    </li>
                                </ol>
                                <input type="button" class="button green-button" value="Добавить объект" />
                            </div>
                            <div class="filter-sub-tab" id="mymrsh">

                            </div>
                        </div>
                    </div>
                </div>

            </form>
        </div>
        <div class="atlas-center">
            <div class="title green-title">
                <h2>Атлас</h2>
            </div>
            <div class="atlas-map" style="margin-top:-10px;">
                <div id="map"></div>
                <div class="atlas-menu"></div>
            </div>
        </div>
    </div>
{% endblock %}

{# ------------------------------------------------------------------------ #}
{% block body2 %}
    <div class="blocksection w" id="f-section">

        <form id="atlas-form" action="{{ path('armd_atlas_default_filter') }}" method="post">

            <div class="filter">
                <div class="title-block green-filter">
                    <h2>Фильтрация</h2>
                </div>
                <div class="filter-search-block">
                    <p class="filter-search-header">Поиск адреса</p>

                    <!-- #geocoder -->
                    <div id="geocoder" class="filter-search-form">
                        <div class="search-box">
                            <input class="search" name="q" type="text">
                            <button class="submit" type="submit" style="display:none;">Find</button>
                        </div>
                        <div class="result-box">
                        </div>
                    </div>
                    <!-- /#geocoder -->

                </div>
                <div class="filter-accordion">
                    <p class="filter-search-header">Фильтрация</p>
                    <div class="filter-accordion-block" id="filter">

{% set level = 0 %}
{% for node in categories %}
    {% if node.lvl == level %}
        </li>
    {% elseif node.lvl > level %}
        <ul class="lvl-{{ node.lvl }}">
    {% else %}
        </li>
        {% for i in 0..(level-node.lvl-1) %}
            </ul>
            </li>
        {% endfor %}
    {% endif %}

    <li>
        <label>
            <input type="checkbox" data-category="{{ node.id }}" name="category[{{ node.id }}]">
            {{ node.title }}
        </label>

    {% set level = node.lvl %}
{% endfor %}
{% for i in 0..level %}
    </li>
    </ul>
{% endfor %}

                    </div>
                </div>
            </div>
            <div class="atlas-center">
                <div class="title-block green">
                    <h2>Атлас</h2>
                </div>
                <div class="atlas-map">
                    <div id="map"></div>
                    <div class="atlas-menu"></div>
                </div>
            </div>

        </form>

    </div>
{% endblock %}

{# ------------------------------------------------------------------------ #}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('static/common/css/atlas.css') }}">
    <link rel="stylesheet" href="{{ asset('bundles/armdatlas/css/atlas_new.css') }}">
{% endblock %}

{# ------------------------------------------------------------------------ #}
{% block javascripts %}
    {{ parent() }}
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
    {# <script type="text/javascript" charset="utf-8" src="http://js.tmcrussia.com/map.js?{{ progorod_api_key }}&version=0.1.8-rc2"></script> #}
    <script type="text/javascript" charset="utf-8" src="http://js.tmcrussia.com/map.js?{{ progorod_api_key }}&version=0.1.7"></script>
    <script type="text/javascript" src="{{ asset('bundles/armdatlas/js/jquery.form.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/armdatlas/js/jquery.cookie.js') }}"></script>
    <script type="text/javascript" src="{{ asset('static/common/js/jquery.uniform.min.js') }}"></script>
    <script type="text/javascript" src="{{ asset('static/common/js/function.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/armdatlas/js/atlas_new.js') }}"></script>
    <script type="text/javascript">
        var fetchMarkersUri      = '{{ path('armd_atlas_default_filter') }}',
            fetchMarkerDetailUri = '{{ path('armd_atlas_default_objectballoon') }}',
            bundleImagesUri      = '{{ asset('bundles/armdatlas/images') }}';

        $(function(){
            AT.init({
                map: 'map',
                center: [97.759578,63.44936],
                zoom: 3
            });
        });
    </script>
{% endblock %}
